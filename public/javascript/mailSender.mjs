const nodemailer = require('nodemailer');

const msg = {
    from: "example@gmail.com",
    to: "receiver@gmail.com",
    subject: "Nodemailer",
    text: "Testing out"
};

nodemailer.createTransport({
    service: 'gmail',
    auth: {
        user: "example@gmail.com",
        pass: "**********" //This should be a password generated by google App password
    },
    port: 465,
    host: 'smtp.gmail.com'
})

.sendMail(msg , (err)=>{
    if (err) {
        return console.log('Error occurs', err);
    }else{
        return console.log('Email Sent');
    }
})



///////////////////////////
// hhxi caov fvqg rdkh


/*
const nodemailer = require('nodemailer');

const transporter = nodemailer.createTransport({
    service: 'gmail',
    host: process.env.EMAIL_HOST,
    port: 465,
    secure: true,
    auth: {
        user: process.env.EMAIL_USER,
        pass: process.env.EMAIL_PASSWORD
    }
});

const sendVerificationEmail = async (email, token) => {
    try {
        await transporter.sendMail({
            from: process.env.EMAIL_USER,
            to: email,
            subject: "Activación de cuenta en ALLSPORT",
            html: getTemplate(token), // Usamos el token como contenido HTML del correo
        });
    } catch (error) {
        console.log('ERROR CON EMAIL:', error);
    }
}

// Función para generar el contenido HTML del correo electrónico de verificación
function getTemplate (token) {
    return `
        <!DOCTYPE html>
        <html lang="es">
        <head>
            <meta charset="UTF-8">
            <title>Verificación de cuenta</title>
        </head>
        <body>
            <h1>Verificación de cuenta </h1>
            <p>Cuenta creada en ALLSPORT MALAGA</p>
            <p>Por favor, haga clic en el siguiente enlace para activar su cuenta:</p>
            <p><a href="http://localhost:4000/verificar/${token}">Activar cuenta</a></p>
        </body>
        </html>
    `;
}

module.exports = {
    sendVerificationEmail
}



*/